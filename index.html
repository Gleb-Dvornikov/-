<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Роудмап беременности — по неделям, интерактив</title>
<meta name="description" content="Интерактивный роудмап беременности по неделям: что норма, когда обращаться, какие чек-апы и что происходит с плодом. Оптимизировано под iPhone." />
<style>
  :root{
    --accent:#66cdaa;        /* ваш мягкий изумруд */
    --accent-2:#8fe3d0;
    --text:#222;
    --muted:#5b5b5b;         /* пожелание по тёмным элементам */
    --bg:#fafafa;
    --card:#ffffff;
    --danger:#e74c3c;
    --ok:#2ecc71;
    --warn:#f39c12;
    --shadow:0 10px 25px rgba(0,0,0,.08);
    --radius:16px;
  }
  *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
  html,body{
    margin:0;padding:0;background:var(--bg);color:var(--text);
    font-family:"Century Gothic","Segoe UI",system-ui,-apple-system,Roboto,Arial,sans-serif;
    -webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.6
  }
  a{color:#0d6b5f;text-decoration:none}
  .container{max-width:1100px;margin:0 auto;padding:20px}

  /* Hero */
  header.hero{
    position:relative;overflow:hidden;color:#01302a;
    background:linear-gradient(135deg,var(--accent),var(--accent-2));
    border-bottom-left-radius:28px;border-bottom-right-radius:28px;
  }
  .hero-inner{padding:28px 20px 20px}
  h1{margin:0;font-size:clamp(22px,4.8vw,40px);letter-spacing:.2px}
  .muted{color:var(--muted)}
  .chip{
    display:inline-flex;align-items:center;gap:8px;background:#fff;color:#01443b;
    padding:8px 12px;border-radius:999px;box-shadow:var(--shadow);font-weight:700
  }
  .chip svg{width:18px;height:18px}

  /* Controls */
  .panel{background:#fff;border-radius:18px;box-shadow:var(--shadow);padding:14px;margin-top:14px}
  .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .seg{flex:1;min-width:110px;text-align:center;padding:10px 12px;border-radius:999px;border:1px solid #e7e7e7;background:#fff;color:#055348;font-weight:700;box-shadow:var(--shadow);cursor:pointer}
  .seg.active{background:#e7fbf3;border-color:#b6e7d7}
  .num{
    display:inline-flex;align-items:center;gap:10px;border-radius:12px;border:1px solid #e6e6e6;background:#fff;
    padding:8px 12px;box-shadow:var(--shadow);font-weight:800;color:#033d35
  }
  .btn{
    display:inline-flex;align-items:center;justify-content:center;width:42px;height:42px;border-radius:12px;
    border:1px solid #e7e7e7;background:#fff;color:#033d35;font-weight:900;box-shadow:var(--shadow);cursor:pointer
  }
  input[type=range]{width:100%}
  .range-wrap{display:flex;align-items:center;gap:10px}

  /* Content Cards */
  .grid{display:grid;gap:16px}
  @media (min-width:960px){ .grid.cols-2{grid-template-columns:1.2fr .8fr} .grid.cols-3{grid-template-columns:1fr 1fr 1fr} }
  .card{background:var(--card);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
  h2{margin:0 0 12px 0;font-size:clamp(18px,3.2vw,26px);color:#033d35}
  h3{margin:10px 0 8px;color:#07493f}
  ul{margin:0;padding-left:18px}
  .ok{color:var(--ok)} .danger{color:var(--danger)} .warn{color:var(--warn)}
  .badge{display:inline-flex;align-items:center;gap:6px;font-size:12px;color:#01443b;background:#e7fbf3;border:1px dashed #b6e7d7;border-radius:999px;padding:4px 10px;margin-left:8px}

  /* Viz (inline SVG) */
  .viz{position:relative;height:260px;border-radius:14px;border:1px solid #e8f3f0;background:#fff;box-shadow:var(--shadow);overflow:hidden}
  .viz h4{position:absolute;top:10px;left:12px;margin:0;color:#055348}
  .caption{position:absolute;bottom:10px;left:12px;font-size:13px;color:#055348;background:rgba(233,251,246,.92);border:1px dashed #b6e7d7;border-radius:8px;padding:4px 8px}
  .sizebar{position:absolute;right:10px;bottom:10px;width:140px;height:8px;background:#eef7f4;border-radius:999px;overflow:hidden;border:1px solid #d4eee3}
  .sizefill{height:100%;width:30%;background:linear-gradient(90deg,#66cdaa,#8fe3d0)}
  .viz svg{position:absolute;inset:0}

  /* Reveal */
  .reveal{opacity:0;transform:translateY(10px);transition:opacity .6s ease, transform .6s ease}
  .reveal.visible{opacity:1;transform:none}

  /* Footer */
  footer{padding:24px 20px 60px;color:#356b61}
  .note{background:#fff9e6;border:1px solid #ffe7a8;border-radius:12px;padding:12px}
</style>
</head>
<body>
<header class="hero">
  <div class="container hero-inner">
    <span class="chip" title="Для жены с заботой">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 21s-8-4.5-8-11a4.5 4.5 0 0 1 8-2 4.5 4.5 0 0 1 8 2c0 6.5-8 11-8 11z" stroke-width="1.6"/></svg>
      Роудмап беременности
    </span>
    <h1 style="margin-top:10px">По неделям: самочувствие (норма/не норма), чек-апы и как растёт малыш</h1>
    <p class="muted">Перед применением любых рекомендаций — согласуйте с вашим акушером-гинекологом. Данные носят ознакомительный характер.</p>

    <div class="panel">
      <div class="row" style="margin-bottom:10px">
        <div class="seg" data-tri="1">1 триместр <small class="muted">0–13 недель</small></div>
        <div class="seg" data-tri="2">2 триместр <small class="muted">14–27 недель</small></div>
        <div class="seg" data-tri="3">3 триместр <small class="muted">28–40 недель</small></div>
      </div>
      <div class="row">
        <button class="btn" id="minus" aria-label="Предыдущая неделя">−</button>
        <span class="num">Неделя: <span id="wDisplay">8</span></span>
        <button class="btn" id="plus" aria-label="Следующая неделя">+</button>
        <div class="range-wrap" style="flex:1">
          <input id="wRange" type="range" min="4" max="40" value="8" />
        </div>
      </div>
    </div>
  </div>
</header>

<main class="container">

  <section class="grid cols-2 reveal">
    <div class="card">
      <div class="viz" aria-live="polite" aria-atomic="true">
        <h4 id="vizTitle">Недели 8–9</h4>
        <!-- Упрощённая SVG-визуализация -->
        <svg viewBox="0 0 720 360" width="100%" height="100%" role="img" aria-labelledby="vizTitle">
          <defs>
            <radialGradient id="ut" cx="50%" cy="50%" r="65%"><stop offset="0%" stop-color="#e7fbf3"/><stop offset="100%" stop-color="#c8efe2"/></radialGradient>
            <filter id="blur" x="-20%" y="-20%" width="140%" height="140%"><feGaussianBlur stdDeviation="2"/></filter>
          </defs>
          <!-- матка -->
          <ellipse cx="360" cy="180" rx="310" ry="150" fill="url(#ut)" stroke="#b6e7d7" stroke-width="3"/>
          <!-- пуповина -->
          <path id="cord" d="M410,160 q40,40 120,10" stroke="#8fe3d0" stroke-width="6" fill="none" filter="url(#blur)"/>
          <!-- плод (бобовидная форма) -->
          <g id="fetus" transform="translate(360,180) scale(0.85)">
            <path d="M70 0c0 52-32 92-70 92S-70 52-70 0 -38-92 0-92 70-52 70 0z" fill="#66cdaa" opacity="0.9"/>
            <circle cx="12" cy="-34" r="12" fill="#055348" opacity="0.9"/>
            <path d="M-18,2 q22,16 44,0" stroke="#055348" stroke-width="4" fill="none" opacity="0.8"/>
          </g>
        </svg>
        <div class="caption"><span id="lenNote">~2.5 см</span> • <span id="wtNote">~2 г</span></div>
        <div class="sizebar"><div class="sizefill" id="sizeFill" style="width:18%"></div></div>
      </div>
    </div>

    <div class="card">
      <h2>Коротко о малыше</h2>
      <ul id="devList">
        <li>Формируются основные органы, идёт активная закладка систем.</li>
        <li>Сердце уже бьётся, появляются зачатки пальцев, глаз и ушей.</li>
        <li>Движения есть, но мама их ещё не чувствует.</li>
      </ul>
      <p class="muted" id="kickNote">Ощущаться шевеления обычно начинают к 16–20 неделям.</p>
    </div>
  </section>

  <section class="grid cols-3 reveal" style="margin-top:16px">
    <div class="card">
      <h2>Чек-апы на этой неделе</h2>
      <ul id="checksList">
        <li>Первичный визит (8–12 нед): постановка на учёт, анализы, УЗИ-датировка.</li>
        <li>Скрининг 11–13+6 (если неделя подходит): УЗИ NT ± биохимия/NIPT.</li>
      </ul>
      <p class="muted" id="nextAppt">Визиты обычно каждые ~4 недели до 28-й, далее чаще по показаниям.</p>
    </div>
    <div class="card">
      <h2>Самочувствие — <span class="ok">норма</span></h2>
      <ul id="normList">
        <li>Усталость, сонливость, тошнота/рвота по утрам, изжога.</li>
        <li>Лёгкие тянущие ощущения без усиления и кровянистых выделений.</li>
      </ul>
    </div>
    <div class="card">
      <h2>Когда обращаться <span class="danger">срочно</span></h2>
      <ul id="redList">
        <li>Сильная боль внизу живота, обильное кровотечение.</li>
        <li>Высокая температура, неукротимая рвота/обезвоживание.</li>
        <li>Выраженная боль/жжение при мочеиспускании, зловонные выделения.</li>
      </ul>
    </div>
  </section>

  <section class="grid cols-2 reveal" style="margin-top:16px">
    <div class="card">
      <h2>Питание и режим</h2>
      <ul id="dietList">
        <li>Дробное питание, перекусы с белком, имбирь/лимон при тошноте.</li>
        <li>Рыба 2–3 р/нед из низкортутных видов, яйца (холин), зелёные листовые.</li>
        <li>Фолат, йод, витамин D — по назначению вашего врача.</li>
      </ul>
    </div>
    <div class="card">
      <h2>Подготовка и заметки</h2>
      <ul id="prepList">
        <li>Список вопросов к врачу; не отменяйте лекарства/БАДы резко.</li>
        <li>Фото-дневник самочувствия и размеров животика.</li>
        <li>Планируем скрининг 11–13+6, анатомическое УЗИ 18–22.</li>
      </ul>
    </div>
  </section>

</main>

<footer class="container">
  <div class="note">
    ⚠️ Если после 28 недель вы отмечаете уменьшение шевелений или их характер резко изменился — не ждите, свяжитесь с женской консультацией/роддомом (даже ночью).
  </div>
</footer>

<script>
/* ====== ДАННЫЕ ПО НЕДЕЛЯМ (ключевые вехи; для промежуточных недель берём ближайшую предыдущую) ====== */
const milestones = {
  /* 1 триместр */
  4:{ len:0.4, wt:0.0, dev:[
      'Имплантация завершена; формируется плацента.',
      'Идёт закладка нервной трубки.'
    ],
    checks:['Начало приёма фолата (если не начат ранее): 400–800 мкг/сут.'],
    norm:['Нежность груди, утомляемость, лёгкая тошнота.'],
    red:['Сильная односторонняя боль + кровотечение — исключить внематочную.'],
    diet:['Фолат-богатые продукты, вода по жажде.'],
    prep:['Запланировать первый визит на 8–12 нед.']
  },
  6:{ len:0.6, wt:0.0, dev:[
      'Сердце начинает биться, формируются зачатки конечностей.',
      'Закладка органов идёт очень активно.'
    ],
    checks:['Если назначено — раннее УЗИ для уточнения срока.'],
    norm:['Тошнота/рвота по утрам, запаховая чувствительность.'],
    red:['Обильное кровотечение, сильная боль, высокая температура.'],
    diet:['Дробное питание, имбирь/лимон при тошноте, белок в каждом приеме.'],
    prep:['Список лекарств/БАДов обсудить с врачом — ничего не отменять резко.']
  },
  8:{ len:1.6, wt:1.0, dev:[
      'Различимы ручки/ножки, формируются черты лица.',
      'Сердцебиение устойчивое.'
    ],
    checks:['Первичный визит (8–12 нед): анализы, УЗИ-датировка.'],
    norm:['Сонливость, тошнота, изжога, частое мочеиспускание.'],
    red:['Сильная боль, кровотечение с сгустками.'],
    diet:['Больше белка, перекусы; вода небольшими глотками.'],
    prep:['Назначить комбинированный скрининг 11–13+6.']
  },
  10:{ len:3.5, wt:4, dev:[
      'Большинство органов сформированы, начинается рост и созревание.',
      'Пальцы отделяются, движения уже есть (не ощущаются).'
    ],
    checks:['Подготовка к скринингу 11–13+6.'],
    norm:['Усталость, перемены настроения, лёгкие тянущие ощущения.'],
    red:['Кровотечение более «менструоподобное», резкая боль.'],
    diet:['Цельнозлаки + белок, минимизировать «пустые» сладости.'],
    prep:['План на II триместр, сдача назначенных анализов.']
  },
  12:{ len:5.5, wt:14, dev:[
      'Снижается риск хромосомных аномалий по результатам скрининга.',
      'Малыш активно двигается.'
    ],
    checks:['Комбинированный скрининг 11–13+6 (УЗИ NT ± биохимия/NIPT).'],
    norm:['Тошнота может идти на спад к 12–14 нед.'],
    red:['Сильные боли/кровотечение — срочно.'],
    diet:['Продолжаем безопасные продукты (пастеризация, готовность).'],
    prep:['Назначить анатомическое УЗИ на 18–22 нед.']
  },

  /* 2 триместр */
  14:{ len:8.5, wt:45, dev:[
      'Начинается «спокойное» время: растёт мышцы и кости.',
      'Появляется лёгкий пушок (лануго).'
    ],
    checks:['План анатомического УЗИ 18–22 нед.'],
    norm:['Больше энергии, может быть изжога, судороги икр.'],
    red:['Выраженные боли/кровь, подтекание вод.'],
    diet:['Белок + кальций, клетчатка от запоров.'],
    prep:['Подобрать комфортную активность (ходьба/йога для беременных).']
  },
  16:{ len:11.5, wt:100, dev:[
      'Развиваются мышцы лица; возможны первые «бабочки» (шевеления).',
      'Укрепляется скелет, формируются ноготки.'
    ],
    checks:['Если назначено — доп. УЗИ (по показаниям).'],
    norm:['Заложенность носа, кровоточивость дёсен — частая норма.'],
    red:['Сильная головная боль, «мушки» перед глазами — обсудить с врачом.'],
    diet:['Холин (яйца), кальций, омега-3; вода.'],
    prep:['Готовим вопросы к анатомическому УЗИ.']
  },
  18:{ len:14, wt:190, dev:[
      'Малыш активно двигается, слышит звуки.',
      'Укрепляются связки, улучшается координация.'
    ],
    checks:['УЗИ 18–22 нед: детальная анатомия плода.'],
    norm:['Боли в спине/тазовом поясе, «ложные» схватки.'],
    red:['Боль с напряжением живота, кровотечение, подтекание вод.'],
    diet:['Белок в каждом приёме, магний из пищи.'],
    prep:['Подготовка к скринингу ГСД 24–28 нед.']
  },
  20:{ len:25, wt:300, dev:[
      'Рост быстрый; мама чётко ощущает шевеления.',
      'Формируются режимы сна/бодрствования.'
    ],
    checks:['Если УЗИ ещё не было — пройти в 18–22 нед.'],
    norm:['Лёгкие отёки к вечеру, изжога.'],
    red:['Снижение/исчезновение шевелений — оценить срочно.'],
    diet:['Клетчатка + вода от изжоги/запоров.'],
    prep:['Продумать план родов (набросок).']
  },
  22:{ len:28, wt:430, dev:[
      'Совершенствуется нервная система, тренируются дыхательные движения.',
      'Слух более чувствительный.'
    ],
    checks:['Готовимся к глюкозному тесту 24–28 нед (по показаниям врача).'],
    norm:['Судороги икр, боли в спине.'],
    red:['Резкое ухудшение самочувствия, боли под рёбрами.'],
    diet:['Дневник питания, контроль сахара — по назначению.'],
    prep:['Подобрать бандаж/поддержку спины при необходимости.']
  },
  24:{ len:30, wt:600, dev:[
      'Лёгкие созревают, но ещё не готовы к самостоятельному дыханию.',
      'Укрепляется иммунная система.'
    ],
    checks:['Скрининг на гестационный диабет 24–28 нед.'],
    norm:['Ночные походы в туалет, изжога.'],
    red:['Сильные головные боли, вспышки в глазах, отёк лица/рук.'],
    diet:['Регулярные приёмы пищи, белок + сложные углеводы.'],
    prep:['Слежение за шевелениями: узнаём привычный паттерн.']
  },
  26:{ len:35, wt:900, dev:[
      'Реакция на свет и звук; тренировка дыхательных движений.',
      'Утолщается жировая клетчатка.'
    ],
    checks:['Завершаем ГСД-скрининг, контроль анализов.'],
    norm:['Одышка при нагрузке, судороги.'],
    red:['Подтекание вод, регулярные схватки — оценить.'],
    diet:['Магний с пищей, вода; ограничить сладкие напитки.'],
    prep:['Планируем отпуск/режим отдыха.']
  },

  /* 3 триместр */
  28:{ len:37, wt:1100, dev:[
      'Активный набор веса, развитие мозга.',
      'Мама отчётливо чувствует шевеления ежедневно.'
    ],
    checks:['Вакцина Tdap 27–36 нед (по назначению врача).'],
    norm:['Одышка, изжога, отёки к вечеру.'],
    red:['Уменьшение/исчезновение шевелений — срочно.'],
    diet:['Дробное питание, клетчатка, вода.'],
    prep:['Список в роддом, контакт акушерки/родблока.']
  },
  30:{ len:39, wt:1400, dev:[
      'Продолжает созревать нервная система, улучшается терморегуляция.',
      'Движения мощные, но могут меняться по характеру.'
    ],
    checks:['Визиты становятся чаще (каждые 2 недели и чаще).'],
    norm:['Брэкстон-Хикс: нерегулярные, без нарастания.'],
    red:['Регулярные болезненные схватки до 37 нед, подтекание вод.'],
    diet:['Железо по анализам; белок в каждом приёме.'],
    prep:['Финализируем план родов и партнёрство (если планируется).']
  },
  32:{ len:42, wt:1700, dev:[
      'Созревают лёгкие; малыш часто занимает головное предлежание.',
      'Отрабатывает хватательный рефлекс.'
    ],
    checks:['Оценка положения плода; УЗИ по показаниям.'],
    norm:['Бессонница, частые позывы в туалет.'],
    red:['Сильные головные боли, «молнии» в глазах, отёк лица/рук.'],
    diet:['Меньше объём — чаще приёмы; вода.'],
    prep:['Собрать родовую сумку, документы.']
  },
  34:{ len:45, wt:2300, dev:[
      'Нарастает подкожно-жировая клетчатка, кожа розовеет.',
      'Движения сильные, возможны «волны».'
    ],
    checks:['Подготовка к GBS-мазку на 36–37 нед.'],
    norm:['Усталость, тянущие ощущения внизу живота.'],
    red:['Кровотечение, подтекание вод — срочно.'],
    diet:['Соль умеренно, контроль отёков.'],
    prep:['Лёгкие упражнения/растяжка, дыхательные техники.']
  },
  36:{ len:47, wt:2700, dev:[
      'Почти доношен; многие малыши уже головкой вниз.',
      'Движения могут стать «катящимися», но не исчезают.'
    ],
    checks:['GBS-скрининг 36–37 нед; визиты раз в 1–2 недели.'],
    norm:['Тяжесть, одышка при ходьбе, частые позывы.'],
    red:['Снижение шевелений, регулярные сильные схватки, отхождение вод.'],
    diet:['Лёгкая еда, клетчатка, вода; мелкие порции чаще.'],
    prep:['Маршрут в роддом, «готовность №1».']
  },
  37:{ len:48, wt:2900, dev:[
      'Доношенный срок начинается с 37 нед (ранняя доношенность).',
      'Готовность к родам — индивидуальна.'
    ],
    checks:['Контроль шевелений ежедневно; мониторинги по показаниям.'],
    norm:['Нерегулярные схватки Брэкстон-Хикса.'],
    red:['Отсутствие шевелений — срочно. Подтекание/отхождение вод.'],
    diet:['Поддерживающее питание, вода.'],
    prep:['Документы у входа, такси/машина наготове.']
  },
  38:{ len:49, wt:3100, dev:[
      'Плод полностью зрел; прибавляет жирок для терморегуляции.',
      'Становится тесно — толчки могут быть реже, но должны быть.'
    ],
    checks:['Еженедельные визиты; оценка шейки/положения.'],
    norm:['Тянущие ощущения, тяжесть, нарушение сна.'],
    red:['Резкая боль/кровь/воды — ехать в роддом.'],
    diet:['Лёгкие углеводы + белок маленькими порциями.'],
    prep:['Психологическая готовность, техники расслабления.']
  },
  39:{ len:50, wt:3300, dev:[
      'Доношенность; плацента достигает «зрелости».',
      'Малыш готов к встрече.'
    ],
    checks:['Визит раз в неделю; КТГ/УЗИ — по показаниям.'],
    norm:['Нерегулярные схватки, опущение живота.'],
    red:['Снижение шевелений — не ждать. Регулярные схватки — в роддом.'],
    diet:['Гидратация, лёгкая еда.'],
    prep:['Сигналы родов: регулярные схватки, излитие вод, «пробка».']
  },
  40:{ len:51, wt:3400, dev:[
      'Средняя длина ~51 см, вес ~3.4 кг (вариативно норма).',
      'Пора знакомиться!'
    ],
    checks:['Если срок превышен — тактика ведения обсуждается индивидуально.'],
    norm:['Усталость, тяжесть, частые позывы.'],
    red:['Снижение/нет шевелений, крови/воды — срочно в роддом.'],
    diet:['Вода под рукой, лёгкая еда небольшими порциями.'],
    prep:['Связь с родблоком/акушеркой, готовность к отъезду.']
  }
};

/* ====== УТИЛИТЫ ====== */
const clamp = (n,min,max)=>Math.max(min,Math.min(max,n));
const nearest = (week)=>{
  const keys = Object.keys(milestones).map(Number).sort((a,b)=>a-b);
  let pick = keys[0];
  for(const k of keys){ if(k<=week) pick=k; else break; }
  return milestones[pick];
};
/* Нормирующая функция для шкалы размера (0..100%) на основе длины 4–51 см */
const sizePercent = (lenCm)=>{
  const min=4, max=51;
  const p = (clamp(lenCm,min,max)-min)/(max-min);
  return Math.round((12 + p*76)); // 12–88% визуально
};

/* ====== ПРИВЯЗКА К UI ====== */
const wRange = document.getElementById('wRange');
const wDisplay = document.getElementById('wDisplay');
const vizTitle = document.getElementById('vizTitle');
const lenNote = document.getElementById('lenNote');
const wtNote = document.getElementById('wtNote');
const sizeFill = document.getElementById('sizeFill');
const fetus = document.getElementById('fetus');

const devList = document.getElementById('devList');
const kickNote = document.getElementById('kickNote');
const checksList = document.getElementById('checksList');
const nextAppt = document.getElementById('nextAppt');
const normList = document.getElementById('normList');
const redList = document.getElementById('redList');
const dietList = document.getElementById('dietList');
const prepList = document.getElementById('prepList');

function renderWeek(week){
  const w = clamp(parseInt(week,10),4,40);
  const d = nearest(w);

  // Заголовки и размеры
  const windowSpan = (w<=12? '8–12' : w<=24? '20–24' : w<=36? '32–36' : '38–40');
  vizTitle.textContent = `Недели ${windowSpan}`;
  wDisplay.textContent = w.toString();

  // Размер/вес (прибл.)
  const len = d.len;   // см
  const wt  = d.wt;    // г (может быть 0..)
  if(len>0) lenNote.textContent = `~${len} см`;
  else lenNote.textContent = 'рост закладок';
  wtNote.textContent = wt>0 ? `~${wt} г` : 'вес ещё крошечный';

  // Шкала и масштаб SVG
  sizeFill.style.width = sizePercent(len||4) + '%';
  const scale = 0.6 + (sizePercent(len||4)/100)*0.9; // 0.6..1.5
  fetus.setAttribute('transform', `translate(360,180) scale(${scale.toFixed(2)})`);

  // Списки
  devList.innerHTML = d.dev.map(x=>`<li>${x}</li>`).join('');
  // Подсказка по шевелениям
  if(w<16) kickNote.textContent = 'Ощущаться шевеления обычно начинают к 16–20 неделям.';
  else if(w<28) kickNote.textContent = 'Шевеления становятся регулярнее; присмотритесь к индивидуальному ритму.';
  else kickNote.textContent = 'Характер движений может меняться, но исчезать они не должны. При снижении — обращайтесь сразу.';

  checksList.innerHTML = d.checks.map(x=>`<li>${x}</li>`).join('');
  nextAppt.textContent = (w<28? 'Визиты обычно каждые ~4 недели до 28-й.' :
                          w<36? 'С 28-й визиты чаще — ориентировочно каждые 2 недели.' :
                                'После 36-й — обычно еженедельно (или чаще по показаниям).');

  normList.innerHTML = d.norm.map(x=>`<li>${x}</li>`).join('');
  redList.innerHTML  = d.red.map(x=>`<li>${x}</li>`).join('');
  dietList.innerHTML = d.diet.map(x=>`<li>${x}</li>`).join('');
  prepList.innerHTML = d.prep.map(x=>`<li>${x}</li>`).join('');
}

/* Слайдер и кнопки */
document.getElementById('minus').addEventListener('click',()=>{ wRange.value = clamp(+wRange.value-1,4,40); renderWeek(wRange.value); });
document.getElementById('plus').addEventListener('click',()=>{ wRange.value = clamp(+wRange.value+1,4,40); renderWeek(wRange.value); });
wRange.addEventListener('input',()=>renderWeek(wRange.value));

/* Быстрые сегменты по триместрам */
document.querySelectorAll('.seg').forEach(seg=>{
  seg.addEventListener('click',()=>{
    document.querySelectorAll('.seg').forEach(s=>s.classList.remove('active'));
    seg.classList.add('active');
    const tri = seg.getAttribute('data-tri');
    if(tri==='1') wRange.value = 8;
    if(tri==='2') wRange.value = 20;
    if(tri==='3') wRange.value = 32;
    renderWeek(wRange.value);
  });
});
/* Стартовые значения */
document.querySelector('.seg[data-tri="1"]').classList.add('active');
renderWeek(8);

/* Плавные появления */
const io = new IntersectionObserver((entries)=>{
  for(const e of entries){ if(e.isIntersecting){ e.target.classList.add('visible'); io.unobserve(e.target);} }
},{threshold:0.15});
document.querySelectorAll('.reveal').forEach(el=>io.observe(el));
</script>
</body>
</html>